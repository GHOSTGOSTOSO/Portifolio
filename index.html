<script>
  const githubUser = 'GHOSTGOSTOSO';
  const githubRepo = 'portifolio';
  const folderName = 'videos';
  const branch = 'main'; // se não funcionar, troca pra 'master'

  const container = document.getElementById('video-container');
  const loader = document.getElementById('loader');

  async function loadVideos() {
    try {
      const apiUrl = `https://api.github.com/repos/${githubUser}/${githubRepo}/contents/${folderName}`;
      const response = await fetch(apiUrl);

      if (!response.ok) throw new Error('Erro na API');

      const data = await response.json();

      const videos = data.filter(file =>
        file.name.toLowerCase().endsWith('.mp4')
      );

      loader.style.display = 'none';

      if (!videos.length) {
        container.innerHTML = '<p style="text-align:center;width:100%;">Nenhum vídeo encontrado.</p>';
        return;
      }

      videos.forEach(video => {
        const rawUrl = `https://raw.githubusercontent.com/${githubUser}/${githubRepo}/${branch}/${folderName}/${video.name}`;

        const wrapper = document.createElement('div');
        wrapper.className = 'video-wrapper';

        wrapper.innerHTML = `
          <video
            controls
            preload="none"
            playsinline
            muted
          >
            <source src="${rawUrl}" type="video/mp4">
            Seu navegador não suporta vídeo.
          </video>
        `;

        container.appendChild(wrapper);
      });

    } catch (err) {
      console.error(err);
      loader.innerHTML = `
        <p style="color:#ff4d4d; text-align:center;">
          Erro ao carregar vídeos.<br>
          Verifique usuário, repo, pasta ou branch.
        </p>
      `;
    }
  }

  loadVideos();
</script>