const githubUser = 'GHOSTGOSTOSO';
const githubRepo = 'portifolio';
const folderName = 'videos';
const branch = 'main'; // troca pra 'master' se main não funcionar

async function loadVideos() {
  try {
    const apiUrl = `https://api.github.com/repos/${githubUser}/${githubRepo}/contents/${folderName}`;
    const response = await fetch(apiUrl);

    if (!response.ok) throw new Error('Erro ao acessar a pasta');

    const files = await response.json();

    const videos = files.filter(file =>
      file.name.toLowerCase().endsWith('.mp4')
    );

    loader.style.display = 'none';

    if (!videos.length) {
      container.innerHTML = '<p style="text-align:center">Nenhum vídeo encontrado.</p>';
      return;
    }

    videos.forEach(video => {
      const rawUrl = `https://raw.githubusercontent.com/${githubUser}/${githubRepo}/${branch}/${folderName}/${video.name}`;

      const wrapper = document.createElement('div');
      wrapper.className = 'video-wrapper';

      wrapper.innerHTML = `
        <video controls preload="none" playsinline muted>
          <source src="${rawUrl}" type="video/mp4">
        </video>
      `;

      container.appendChild(wrapper);
    });

  } catch (err) {
    console.error(err);
    loader.innerHTML = `
      <p style="color:red; text-align:center">
        Erro ao carregar vídeos.<br>
        Usuário, repo, pasta ou branch errados.
      </p>
    `;
  }
}

loadVideos();